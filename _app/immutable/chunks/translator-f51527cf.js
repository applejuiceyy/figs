import{_ as h}from"./preload-helper-aa6bc0ce.js";import{w as p,d as E}from"./index-49f2ceed.js";import{l as O}from"./loading-1c936e04.js";let d=[],f="en_us",m=!0,b=!0,v=!1;var g;{let s=localStorage.getItem("favourites");s!==null&&(d=s===""?[]:s.split(";")),f=(g=localStorage.getItem("locale"))!=null?g:"en_us",m=localStorage.getItem("figs-spe")===null,b=localStorage.getItem("figs-epe")===null,v=localStorage.getItem("figs-re")!==null}let S=p({readerEnabled:v,favourites:d,language:f,signaturePopupEnabled:m,examplePopupEnabled:b});S.subscribe(s=>{localStorage.setItem("favourites",s.favourites.join(";")),localStorage.setItem("locale",s.language),s.examplePopupEnabled?localStorage.removeItem("figs-epe"):localStorage.setItem("figs-epe",""),s.signaturePopupEnabled?localStorage.removeItem("figs-spe"):localStorage.setItem("figs-spe",""),s.readerEnabled?localStorage.setItem("figs-re",""):localStorage.removeItem("figs-re")});const _="Favourites",T="Content",w="Search",P="Preferences",c={favourites:_,"hide-table":"Hide Table","show-table":"Show Table","disable-focus":"Disable Focus","enable-focus":"Enable Focus",content:T,"global-objects":"Global Objects","misc-types":"Miscellaneous Types","misc-enums":"Miscellaneous Enums",search:w,"pick-a-version":"Pick a version","version-not-selected":"Version not selected","made-by-applejuice":"Made by applejuice","show-everything":"Show everything","show-not-everything":"Show not everything",preferences:P,"jump-to-top":"Jump to top","enable-popup-in-examples":"Show popups in examples","enable-popup-in-signature":"Show popups in signatures","disable-popup-in-examples":"Hide popups in examples","disable-popup-in-signature":"Hide popups in signatures"},L=Object.freeze(Object.defineProperty({__proto__:null,favourites:_,content:T,search:w,preferences:P,default:c},Symbol.toStringTag,{value:"Module"}));let y=Object.assign({"./figs/en_us.json":()=>h(()=>Promise.resolve().then(()=>L),void 0,import.meta.url).then(s=>s.default),"./figs/pt_pt.json":()=>h(()=>import("./pt_pt-50b6b650.js"),[],import.meta.url).then(s=>s.default)}),o={en_us:c},V=Object.entries(y);V.forEach(s=>{let e=s[0].split("/"),t=e[e.length-1].split(".")[0];t in o||(o[t]=s[1])});function x(s){return s.replaceAll("u","uwu").replaceAll("d","w").replaceAll("b","w").replaceAll("g","w").replaceAll("t","w")+(Math.random()>.8?" >w<":" :3")}let j={};Object.entries(c).forEach(s=>{j[s[0]]=x(s[1])});o.en_uwu=()=>new Promise(s=>s(j));function l(s,e){return`${s}-${e}`}class A{constructor(e){this.cachedTranslations={},this.providers={},this.stores={},this.languageStore=e,this.currentLanguage="",this.activeTransfers=[],this.loadCancel=()=>{},this.languageStore.subscribe(async t=>{t!==this.currentLanguage&&(this.currentLanguage=t,this.reloadQueue(),this.updateStores())})}reloadQueue(){if(this.currentLanguage!=="en_us"){let e=Object.entries(this.providers);for(let t=0;t<e.length;t++){let r=e[t],i=l(r[0],this.currentLanguage);this.currentLanguage in r[1]&&!(i in this.cachedTranslations||this.activeTransfers.includes(i))&&this.transfer(r[0])}}}async transfer(e){let t=this.currentLanguage,r=l(e,t),i=O.request(`Fetching language with a cache id of "${r}"`);this.activeTransfers.push(r);let a,n=this.providers[e][t];if(typeof n=="function")try{a=await n()}catch(u){console.error(u),this.activeTransfers.splice(this.activeTransfers.findIndex(I=>I==r),1),i();return}else a=n;this.cachedTranslations[r]=a,this.activeTransfers.splice(this.activeTransfers.findIndex(u=>u==r),1),t===this.currentLanguage&&this.updateStores(),i()}updateStores(){let e=Object.entries(this.stores);for(let t=0;t<e.length;t++)e[t][1].set(this.getStoreValue(e[t][0]))}getStoreValue(e){let t=Object.entries(this.providers);for(let r=0;r<t.length;r++){let i=t[r],a=l(i[0],this.currentLanguage);if(a in this.cachedTranslations&&e in this.cachedTranslations[a])return{type:"RESULT",result:this.cachedTranslations[a][e]};if(a=l(i[0],"en_us"),a in this.cachedTranslations&&e in this.cachedTranslations[a])return{type:"FALLBACK",result:this.cachedTranslations[a][e]}}return this.activeTransfers.length>0?{type:"PROCESSING"}:{type:"NOTFOUND"}}getPresentableValue(e){let t=this.getStoreValue(e);return this.getPresentableValueFromResult(t,e)}getPresentableValueFromResult(e,t){return e.type==="RESULT"?e.result:t}addProvider(e,t){this.providers[t]=e;let r=l(t,"en_us");return this.cachedTranslations[r]=e.en_us,this.reloadQueue(),()=>this.removeProvider(t)}removeProvider(e){delete this.providers[e],this.reloadQueue()}createStore(e){if(e in this.stores)return this.stores[e];let t=p(this.getStoreValue(e),r=>(e in this.stores||(this.stores[e]=t,r(this.getStoreValue(e))),()=>{delete this.stores[e]}));return this.stores[e]=t,t}getProviderStatistics(){let e={providers:Object.keys(this.providers),languages:{}},t=Object.entries(this.providers);for(let r=0;r<t.length;r++){let i=t[r],a=Object.keys(i[1]);for(let n=0;n<a.length;n++)a[n]in e.languages||(e.languages[a[n]]=[]),e.languages[a[n]].push(i[0])}return e}}let F=new A(E(S,s=>s.language));F.addProvider(o,"figs");export{F as p,S as w};
